"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[431],{3090:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"sdk","title":"ROCK SDK Documentation","description":"This guide provides detailed information on how to use the ROCK SDK for development, including sandbox environment management and GEM environment interaction.","source":"@site/rock/sdk.md","sourceDirName":".","slug":"/sdk","permalink":"/ROCK/docs/sdk","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/rock/rock/sdk.md","tags":[],"version":"current","lastUpdatedAt":1762761667000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROCK Quick Start Guide","permalink":"/ROCK/docs/quickstart"}}');var t=o(4848),r=o(8453);const a={},s="ROCK SDK Documentation",d={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"1. Overview",id:"1-overview",level:2},{value:"2. Sandbox SDK",id:"2-sandbox-sdk",level:2},{value:"2.1 Basic Sandbox Operations",id:"21-basic-sandbox-operations",level:3},{value:"3.2 Sandbox Group Management",id:"32-sandbox-group-management",level:3},{value:"3.4 Configuration Example",id:"34-configuration-example",level:3},{value:"Related Documents",id:"related-documents",level:2},{value:"3. GEM SDK",id:"3-gem-sdk",level:2},{value:"3.1 Python SDK Approach",id:"31-python-sdk-approach",level:3}];function l(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"rock-sdk-documentation",children:"ROCK SDK Documentation"})}),"\n",(0,t.jsx)(e.p,{children:"This guide provides detailed information on how to use the ROCK SDK for development, including sandbox environment management and GEM environment interaction."}),"\n",(0,t.jsx)(e.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#1-overview",children:"Overview"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"#2-sandbox-sdk",children:"Sandbox SDK"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#21-basic-sandbox-operations",children:"Basic Sandbox Operations"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#22-sandbox-group-management",children:"Sandbox Group Management"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#23-configuration-example",children:"Configuration Example"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"#3-gem-sdk",children:"GEM SDK"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#31-python-sdk-approach",children:"Python SDK Approach"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,t.jsx)(e.p,{children:"ROCK SDK provides developers with convenient Python interfaces to use ROCK platform features, including sandbox environment management and GEM environment interaction."}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Important Note"}),": Before using the SDK, ensure that the ROCK Admin service is running. You can start it with the following command:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"uv run admin --env local\n"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"2-sandbox-sdk",children:"2. Sandbox SDK"}),"\n",(0,t.jsx)(e.h3,{id:"21-basic-sandbox-operations",children:"2.1 Basic Sandbox Operations"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import asyncio\n\nfrom rock.actions import CreateBashSessionRequest\nfrom rock.sdk.sandbox.client import Sandbox\nfrom rock.sdk.sandbox.config import SandboxConfig\n\nasync def run_sandbox():\n    """Run sandbox demo with admin server requirement.\n\n    NOTE: This demo requires the admin server to be running for proper execution.\n    Make sure to start the admin server before running this script.\n    Default admin server port is 8080.\n    """\n    # Create sandbox configuration\n    config = SandboxConfig(image="python:3.11", memory="8g", cpus=2.0)\n\n    # Create sandbox instance\n    sandbox = Sandbox(config)\n\n    # Start sandbox (connects to admin server)\n    await sandbox.start()\n\n    # Create session in sandbox for command execution\n    await sandbox.create_session(CreateBashSessionRequest(session="bash-1"))\n\n    # Execute command in sandbox session\n    result = await sandbox.arun(cmd="echo Hello ROCK", session="bash-1")\n    print("\\n" + "*" * 50 + "\\n" + result.output + "\\n" + "*" * 50 + "\\n")\n\n    # Stop and clean up sandbox resources\n    await sandbox.stop()\n\nif __name__ == "__main__":\n    # Ensure admin server is running before executing\n    print("IMPORTANT: Make sure the admin server is running before executing this demo!")\n    print("Start the admin server with: uv run admin --env local")\n    asyncio.run(run_sandbox())\n'})}),"\n",(0,t.jsx)(e.h3,{id:"32-sandbox-group-management",children:"3.2 Sandbox Group Management"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'from rock.sdk.sandbox.config import SandboxGroupConfig\n\n# Create sandbox group configuration\nconfig = SandboxGroupConfig(\n    image="python:3.11",\n    size=4,  # Create 4 sandboxes\n    start_concurrency=2,  # Concurrency level for startup is 2\n)\n\n# Create and start sandbox group\nsandbox_group = SandboxGroup(config)\nawait sandbox_group.start()\n\n# Batch operations\nfor sandbox in sandbox_group.sandbox_list:\n    await sandbox.run_in_session(Action(session="default", command="echo Hello"))\n\n# Batch stop\nawait sandbox_group.stop()\n'})}),"\n",(0,t.jsx)(e.h3,{id:"34-configuration-example",children:"3.4 Configuration Example"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'config = SandboxConfig(\n    image="python:3.11",\n    auto_clear_seconds=60 * 20,\n    experiment_id="test",\n)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/ROCK/docs/quickstart",children:"Quick Start Guide"})," - Learn how to quickly get started with the ROCK SDK"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/ROCK/docs/api",children:"API Documentation"})," - View the underlying API interfaces encapsulated by the SDK"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/ROCK/docs/configuration",children:"Configuration Guide"})," - Learn about SDK-related configuration options"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/ROCK/docs/installation",children:"Installation Guide"})," - Detailed information about ROCK installation and setup"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"3-gem-sdk",children:"3. GEM SDK"}),"\n",(0,t.jsx)(e.h3,{id:"31-python-sdk-approach",children:"3.1 Python SDK Approach"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import random\nimport rock\n\ndef main():\n    """Main function to run the Sokoban demo with admin server requirement.\n\n    NOTE: This demo requires the admin server to be running for proper execution.\n    Make sure to start the admin server before running this script.\n    """\n    # Create environment using GEM standard interface\n    # NOTE: This requires the admin server to be running\n    env_id = "game:Sokoban-v0-easy"\n    env = rock.make(env_id)\n\n    # Reset environment to initial state\n    observation, info = env.reset(seed=42)\n    print(\n        "\\n"\n        + "=" * 80\n        + "\\nInitial Observation:\\n"\n        + str(observation)\n        + "\\n\\nInitial Info:\\n"\n        + str(info)\n        + "\\n"\n        + "=" * 80\n        + "\\n"\n    )\n\n    # Run environment loop until termination\n    step_count = 0\n    while True:\n        # Interactive environment operation with random actions\n        action = f"\\\\boxed{{{random.choice([\'up\', \'left\', \'right\', \'down\'])}}}"\n        observation, reward, terminated, truncated, info = env.step(action)\n\n        step_count += 1\n        print(\n            "\\n"\n            + "-" * 80\n            + f"\\nStep {step_count} - Action: {action}\\nReward: {reward}\\nObservation:\\n{observation}\\nInfo: {info}\\nTerminated: {terminated}, Truncated: {truncated}\\n"\n            + "-" * 80\n            + "\\n"\n        )\n\n        # Check if environment has reached terminal state\n        if terminated or truncated:\n            print("\\n" + "=" * 80 + "\\nEpisode finished!\\n" + "=" * 80 + "\\n")\n            break\n\n    # Clean up environment resources\n    env.close()\n\nif __name__ == "__main__":\n    # Ensure admin server is running before executing\n    print(\n        "\\n"\n        + "=" * 80\n        + "\\nIMPORTANT: Make sure the admin server is running before executing this demo!\\nStart the admin server with: uv run admin --env local\\n"\n        + "=" * 80\n        + "\\n"\n    )\n    main()\n'})})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>a,x:()=>s});var i=o(6540);const t={},r=i.createContext(t);function a(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);